(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{377:function(e,t,o){"use strict";o.r(t);var a=o(7),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"docker"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#docker","aria-label":"Anchor"}},[e._v("#")]),e._v(" Docker")]),e._v(" "),o("img",{attrs:{src:"https://devicons.github.io/devicon/devicon.git/icons/docker/docker-original-wordmark.svg",alt:"docker",width:"100",height:"100"}}),e._v(" "),o("p",[e._v("You can follow along this 101 tutorial"),o("a",{attrs:{href:"http://localhost/tutorial/",target:"_blank",rel:"noopener noreferrer"}},[o("WarningOpenLinkNewWindow"),e._v(" "),o("OutboundLink")],1)]),e._v(" "),o("p",[o("code",[e._v("docker run -d -p 80:80 docker/getting-started")])]),e._v(" "),o("p",[e._v("Building the App's Container Image¶\nIn order to build the application, we need to use a "),o("code",[e._v("Dockerfile")]),e._v(". A Dockerfile is simply a text-based script of instructions that is used to create a container image. If you've created Dockerfiles before, you might see a few flaws in the Dockerfile below. But, don't worry! We'll go over them.")]),e._v(" "),o("p",[e._v("Create a file named Dockerfile in the same folder as the file package.json with the following contents.")]),e._v(" "),o("div",{staticClass:"language-docker extra-class"},[o("pre",{pre:!0,attrs:{class:"language-docker"}},[o("code",[o("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" node"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("12"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("alpine\n"),o("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WORKDIR")]),e._v(" /app\n"),o("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("COPY")]),e._v(" . .\n"),o("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("RUN")]),e._v(" yarn install "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("production\n"),o("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CMD")]),e._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),o("span",{pre:!0,attrs:{class:"token string"}},[e._v('"node"')]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[e._v('"src/index.js"')]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),o("p",[e._v("Please check that the file Dockerfile has no file extension like .txt. Some editors may append this file extension automatically and this would result in an error in the next step.")]),e._v(" "),o("p",[e._v("If you haven't already done so, open a terminal and go to the app directory with the Dockerfile. Now build the container image using the docker build command.")]),e._v(" "),o("p",[e._v('docker build -t getting-started .\nThis command used the Dockerfile to build a new container image. You might have noticed that a lot of "layers" were downloaded. This is because we instructed the builder that we wanted to start from the node:12-alpine image. But, since we didn\'t have that on our machine, that image needed to be downloaded.')]),e._v(" "),o("p",[e._v("After the image was downloaded, we copied in our application and used yarn to install our application's dependencies. The CMD directive specifies the default command to run when starting a container from this image.")]),e._v(" "),o("p",[e._v("Finally, the -t flag tags our image. Think of this simply as a human-readable name for the final image. Since we named the image getting-started, we can refer to that image when we run a container.")]),e._v(" "),o("p",[e._v("The . at the end of the docker build command tells that Docker should look for the Dockerfile in the current directory.")]),e._v(" "),o("p",[e._v("Starting an App Container¶\nNow that we have an image, let's run the application! To do so, we will use the docker run command (remember that from earlier?).")]),e._v(" "),o("p",[e._v("Start your container using the docker run command and specify the name of the image we just created:")]),e._v(" "),o("p",[o("code",[e._v("docker run -dp 3000:3000 getting-started")]),e._v("\nRemember the "),o("code",[e._v("-d")]),e._v(" and "),o("code",[e._v("-p")]),e._v(" flags? We're running the new container in \"detached\" mode (in the background) and creating a mapping between the host's port 3000 to the container's port 3000. Without the port mapping, we wouldn't be able to access the application.")]),e._v(" "),o("p",[e._v("After a few seconds, open your web browser to "),o("code",[e._v("http://localhost:3000")]),e._v(". You should see our app!")]),e._v(" "),o("p",[e._v("emoving a container using the CLI¶\nGet the ID of the container by using the docker ps command.")]),e._v(" "),o("p",[o("code",[e._v("docker ps")]),e._v("\nUse the docker stop command to stop the container.")]),e._v(" "),o("blockquote",[o("p",[e._v("Swap out "),o("code",[e._v("<the-container-id>")]),e._v(" with the ID from docker ps")])]),e._v(" "),o("p",[o("code",[e._v("docker stop <the-container-id>")]),e._v("\nOnce the container has stopped, you can remove it by using the docker rm command.")]),e._v(" "),o("p",[o("code",[e._v("docker rm <the-container-id>")])]),e._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[e._v("Pro tip")]),e._v(" "),o("p",[e._v('You can stop and remove a container in a single command by adding the "force" flag to the docker rm command. For example:\n'),o("code",[e._v("docker rm -f <the-container-id>")])])]),e._v(" "),o("p",[e._v('Pushing our Image¶\nIn the command line, try running the push command you see on Docker Hub. Note that your command will be using your namespace, not "docker".')]),e._v(" "),o("p",[o("code",[e._v("$ docker push docker/getting-started")])]),e._v(" "),o("div",{staticClass:"custom-block danger"},[o("p",{staticClass:"custom-block-title"},[e._v("Error message")]),e._v(" "),o("p",[e._v("The push refers to repository [docker.io/docker/getting-started]\nAn image does not exist locally with the tag: docker/getting-started")])]),e._v(" "),o("p",[e._v("Why did it fail? The push command was looking for an image named docker/getting-started, but didn't find one. If you run docker image ls, you won't see one either.")]),e._v(" "),o("p",[e._v('To fix this, we need to "tag" our existing image we\'ve built to give it another name.')]),e._v(" "),o("p",[e._v("Login to the Docker Hub using the command "),o("code",[e._v("docker login -u YOUR-USER-NAME")]),e._v(".")]),e._v(" "),o("p",[e._v("Use the docker tag command to give the getting-started image a new name. Be sure to swap out YOUR-USER-NAME with your Docker ID.")]),e._v(" "),o("p",[o("code",[e._v("docker tag getting-started YOUR-USER-NAME/getting-started")]),e._v("\nNow try your push command again. If you're copying the value from Docker Hub, you can drop the tagname portion, as we didn't add a tag to the image name. If you don't specify a tag, Docker will use a tag called latest.")]),e._v(" "),o("p",[o("code",[e._v("docker push YOUR-USER-NAME/getting-started")])])])}),[],!1,null,null,null);t.default=n.exports}}]);